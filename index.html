
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex,nofollow" />
    <script src="https://telegram.org/js/telegram-web-app.js?2"></script>
    <link rel="stylesheet" href="style.css" />
    <title></title>

</head>

<body class="" style="visibility: hidden;">

<div>Hello world</div>

<script type="application/javascript">

    /*
     * This is a demo code for Telegram WebApp for Bots
     * It contains basic examples of how to use the API
     * Note: all requests to backend are disabled in this demo, you should use your own backend
     */

    const DemoApp = {
        initData      : Telegram.WebApp.initData || '',
        initDataUnsafe: Telegram.WebApp.initDataUnsafe || {},
        MainButton: Telegram.WebApp.MainButton,
        SecondaryButton: Telegram.WebApp.SecondaryButton,
        BackButton: Telegram.WebApp.BackButton,
        SettingsButton: Telegram.WebApp.SettingsButton,

        init: function(options) {
            document.body.style.visibility = '';
            Telegram.WebApp.ready();

            Telegram.WebApp.MainButton.setParams({
                text: 'Close Webview',
                has_shine_effect: true,
                is_visible: true
            }).onClick(DemoApp.close);

            Telegram.WebApp.SecondaryButton.setParams({
                text: 'Do Something',
                is_visible: true
            }).onClick(DemoApp.moveSecondaryButton);

            Telegram.WebApp.BackButton.onClick(function() {
                DemoApp.showAlert('Back button pressed');
            });

            Telegram.WebApp.SettingsButton.onClick(function() {
                DemoApp.showAlert('Settings opened!');
            });
        },

        // accelerometer
        accelerometerInit() {
            Telegram.WebApp.onEvent('accelerometerStarted', function() {
                const span = document.getElementById('accelerometer_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateAccelerometerLink();
            })

            Telegram.WebApp.onEvent('accelerometerStopped', function() {
                const span = document.getElementById('accelerometer_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateAccelerometerLink();
            })

            Telegram.WebApp.onEvent('accelerometerChanged', function() {
                const span = document.getElementById('accelerometer_btn').nextElementSibling;
                span.textContent = '(x: ' + this.Accelerometer.x + '; y: ' + this.Accelerometer.y + '; z: ' + this.Accelerometer.z + ')';
                span.className = 'ok';
            })

            Telegram.WebApp.onEvent('accelerometerFailed', function(params) {
                const span = document.getElementById('accelerometer_btn').nextElementSibling;
                span.textContent = '(ERR: ' + params.error + ')';
                span.className = 'err';
            })

            DemoApp.updateAccelerometerLink()
        },
        toggleAccelerometer: function(el) {
            if (Telegram.WebApp.Accelerometer.isStarted) {
                Telegram.WebApp.Accelerometer.stop();
            } else {
                Telegram.WebApp.Accelerometer.start({ refresh_rate: 100 });
            }
        },
        updateAccelerometerLink() {
            var accelerometerBtn = document.getElementById('accelerometer_btn');
            if (Telegram.WebApp.Accelerometer.isStarted) {
                accelerometerBtn.innerHTML = 'Stop Accelerometer';
            } else {
                accelerometerBtn.innerHTML = 'Start Accelerometer';
            }
        },

        // device orientation
        deviceOrientationInit() {
            Telegram.WebApp.onEvent('deviceOrientationStarted', function() {
                var span = document.getElementById('device_orientation_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateDeviceOrientationLink();
            })

            Telegram.WebApp.onEvent('deviceOrientationStopped', function() {
                var span = document.getElementById('device_orientation_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateDeviceOrientationLink();
            })

            Telegram.WebApp.onEvent('deviceOrientationChanged', function() {
                var span = document.getElementById('device_orientation_btn').nextElementSibling;
                span.textContent = '(alpha: ' + this.DeviceOrientation.alpha +
                    '; beta: ' + this.DeviceOrientation.beta +
                    '; gamma: ' + this.DeviceOrientation.gamma +
                    '; absolute: ' + (this.DeviceOrientation.absolute ? 'true' : 'false') + ')';
                span.className = 'ok';
            })

            Telegram.WebApp.onEvent('deviceOrientationFailed', function(params) {
                var span = document.getElementById('device_orientation_btn').nextElementSibling;
                span.textContent = '(ERR: ' + params.error + ')';
                span.className = 'err';
            })

            DemoApp.updateDeviceOrientationLink()
        },
        toggleDeviceOrientation(el, need_absolute) {
            if (Telegram.WebApp.DeviceOrientation.isStarted) {
                Telegram.WebApp.DeviceOrientation.stop();
            } else {
                Telegram.WebApp.DeviceOrientation.start({ refresh_rate: 100, need_absolute: need_absolute });
            }
        },
        updateDeviceOrientationLink() {
            var deviceOrientationBtn = document.getElementById('device_orientation_btn');
            var absItem = document.getElementById('device_orientation_abs_item');

            if (Telegram.WebApp.DeviceOrientation.isStarted) {
                deviceOrientationBtn.innerHTML = 'Stop DeviceOrientation';
                absItem.style.display = 'none';
            } else {
                deviceOrientationBtn.innerHTML = 'Start DeviceOrientation(need_absolute=false)';
                absItem.style.display = 'block';
            }
        },

        // gyroscope
        gyroscopeInit() {
            Telegram.WebApp.onEvent('gyroscopeStarted', function() {
                var span = document.getElementById('gyroscope_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateGyroscopeLink();
            })

            Telegram.WebApp.onEvent('gyroscopeStopped', function() {
                var span = document.getElementById('gyroscope_btn').nextElementSibling;
                span.textContent = '';
                span.className = '';
                DemoApp.updateGyroscopeLink();
            })

            Telegram.WebApp.onEvent('gyroscopeChanged', function() {
                var span = document.getElementById('gyroscope_btn').nextElementSibling;
                span.textContent = '(x: ' + this.Gyroscope.x + '; y: ' + this.Gyroscope.y + '; z: ' + this.Gyroscope.z + ')';
                span.className = 'ok';
            })

            Telegram.WebApp.onEvent('gyroscopeFailed', function(params) {
                var span = document.getElementById('gyroscope_btn').nextElementSibling;
                span.textContent = '(ERR: ' + params.error + ')';
                span.className = 'err';
            })

            DemoApp.updateGyroscopeLink()
        },
        toggleGyroscope(el) {
            if (Telegram.WebApp.Gyroscope.isStarted) {
                Telegram.WebApp.Gyroscope.stop();
            } else {
                Telegram.WebApp.Gyroscope.start({ refresh_rate: 100 });
            }
        },
        updateGyroscopeLink() {
            var gyroscopeBtn = document.getElementById('gyroscope_btn');
            if (Telegram.WebApp.Gyroscope.isStarted) {
                gyroscopeBtn.innerHTML = 'Stop Gyroscope';
            } else {
                gyroscopeBtn.innerHTML = 'Start Gyroscope';
            }
        },

        // location
        locationInit(el) {
            const locationManager = Telegram.WebApp.LocationManager;

            if (!DemoApp.locationInited) {
                DemoApp.locationInited = true;
                Telegram.WebApp.onEvent('locationManagerUpdated', function() {
                    document.getElementById('loc_inited').textContent = locationManager.isInited ? 'true' : 'false';
                    document.getElementById('loc_available').textContent = locationManager.isLocationAvailable ? 'true' : 'false';
                    document.getElementById('loc_access_requested').textContent = locationManager.isAccessRequested ? 'true' : 'false';
                    document.getElementById('loc_access_granted').textContent = locationManager.isAccessGranted ? 'true' : 'false';
                    document.getElementById('loc_settings').style.display = (locationManager.isLocationAvailable && locationManager.isAccessRequested && !locationManager.isAccessGranted) ? 'block' : 'none';
                });
            }
            locationManager.init();
        },
        locationGet(el) {
            const locationManager = Telegram.WebApp.LocationManager;
            if (!locationManager.isInited) {
                return DemoApp.showAlert('Location not inited yet!');
            }

            locationManager.getLocation(function(location_data) {
                const span = el.nextElementSibling;
                if (location_data) {
                    span.textContent = '(' + JSON.stringify(location_data) + ')';
                    span.className = 'ok';
                } else {
                    span.textContent = '(Request declined)';
                    span.className = 'err';
                }
            })
        },
        locationOpenSettings(el) {
            const locationManager = Telegram.WebApp.LocationManager;
            if (!locationManager.isInited) {
                return DemoApp.showAlert('Location not inited yet!');
            }

            if (!locationManager.isLocationAvailable || !locationManager.isAccessRequested || locationManager.isAccessGranted) {
                return false;
            }

            locationManager.openSettings();
        }
    }
</script>

<script type="application/javascript">
    // permissions
    try {
        DemoApp.testClipboard(document.getElementById('clipboard_test'));
    } catch(e) {}
    try {
        DemoApp.loadCloudKeys();
    } catch(e) {}
    try {
        DemoApp.biometricInit();
    } catch(e) {}
    try {
        DemoApp.fullscreenInit();
    } catch(e) {}
    try {
        DemoApp.accelerometerInit();
    } catch(e) {}
    try {
        DemoApp.deviceOrientationInit();
    } catch(e) {}
    try {
        DemoApp.gyroscopeInit();
    } catch(e) {}
    try {
        DemoApp.locationInit();
    } catch(e) {}
    try {
        DemoApp.homeScreenInit();
    } catch(e) {}
    try {
        DemoApp.emojiStatusInit();
    } catch(e) {}
    try {
        DemoApp.activityInit();
    } catch(e) {}
</script>

</body>
</html>
